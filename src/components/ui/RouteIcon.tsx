import { useAgencies } from "~/hooks/useBackend";
import { VehicleType } from "~/tools/typings";
import { SvgXml } from "react-native-svg";

export const defaultColors: Record<number, string> = {
    [VehicleType.Tram]: "#be0d05",
    [VehicleType.Subway]: "#ba0059",
    [VehicleType.Train]: "#415f91",
    [VehicleType.Bus]: "#2b6c00",
    [VehicleType.Ferry]: "#0061a4",
    [VehicleType.AerialLift]: "#88511e",
    [VehicleType.Funicular]: "#705289",
    [VehicleType.Trolleybus]: "#006c46",
    [VehicleType.Monorail]: "#895120",
};

const typeIcons: Record<number, string> = {
    [VehicleType.Tram]: `<path d="M19 16.94V8.5c0-2.79-2.61-3.4-6.01-3.49l.76-1.51H17V2H7v1.5h4.75l-.76 1.52C7.86 5.11 5 5.73 5 8.5v8.44c0 1.45 1.19 2.66 2.59 2.97L6 21.5v.5h2.23l2-2H14l2 2h2v-.5L16.5 20h-.08c1.69 0 2.58-1.37 2.58-3.06zm-7 1.56c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm5-4.5H7V9h10v5z" />`,
    [VehicleType.Subway]: `<circle cx="15.5" cy="16" r="1" /><circle cx="8.5" cy="16" r="1" /><path d="M7.01 9h10v5h-10zM17.8 2.8C16 2.09 13.86 2 12 2c-1.86 0-4 .09-5.8.8C3.53 3.84 2 6.05 2 8.86V22h20V8.86c0-2.81-1.53-5.02-4.2-6.06zm.2 13.08c0 1.45-1.18 2.62-2.63 2.62l1.13 1.12V20H15l-1.5-1.5h-2.83L9.17 20H7.5v-.38l1.12-1.12C7.18 18.5 6 17.32 6 15.88V9c0-2.63 3-3 6-3 3.32 0 6 .38 6 3v6.88z" />`,
    [VehicleType.Train]: `<path d="M12 2c-4 0-8 .5-8 4v9.5C4 17.43 5.57 19 7.5 19L6 20.5v.5h2.23l2-2H14l2 2h2v-.5L16.5 19c1.93 0 3.5-1.57 3.5-3.5V6c0-3.5-3.58-4-8-4zM7.5 17c-.83 0-1.5-.67-1.5-1.5S6.67 14 7.5 14s1.5.67 1.5 1.5S8.33 17 7.5 17zm3.5-7H6V6h5v4zm2 0V6h5v4h-5zm3.5 7c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" />`,
    [VehicleType.Bus]: `<path d="M4 16c0 .88.39 1.67 1 2.22V20c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h8v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1.78c.61-.55 1-1.34 1-2.22V6c0-3.5-3.58-4-8-4s-8 .5-8 4v10zm3.5 1c-.83 0-1.5-.67-1.5-1.5S6.67 14 7.5 14s1.5.67 1.5 1.5S8.33 17 7.5 17zm9 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm1.5-6H6V6h12v5z" />`,
    [VehicleType.Ferry]: `<path d="M20 21c-1.39 0-2.78-.47-4-1.32-2.44 1.71-5.56 1.71-8 0C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 2.52 1.29 5.48 1.29 8 0 1.26.65 2.62.99 4 .99h2v-2h-2zM3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19zM6 6h12v3.97L12 8 6 9.97V6z" />`,
    [VehicleType.AerialLift]: `<path d="M15.844.844q1.649-.157 2.344 1.313 2.057-.761 4.219-.844.922.643.281 1.594a121 121 0 0 1-9.656 2.625v3.375q2.439-.047 4.875.094 2.203.703 2.906 2.906a79 79 0 0 1 0 7.688q-.234.984-1.219 1.219a315 315 0 0 1-15.375 0Q3.235 20.58 3 19.595a79 79 0 0 1 0-7.688Q3.703 9.703 5.906 9q2.436-.141 4.875-.094a9.4 9.4 0 0 0-.188-2.625 897 897 0 0 1-8.719 2.438Q.196 8.052 1.406 6.75a60 60 0 0 1 4.5-1.219q-.269-1.795 1.5-2.25l.938.375q.917 1.565 2.438.375Q11.021 2.526 12.47 3a1.3 1.3 0 0 1 .469.656 6.6 6.6 0 0 1 1.969-.563q-.288-1.481.938-2.25M6.283 10.968h1.875v3.938H4.97q-.047-1.316.094-2.625.476-.804 1.219-1.313m3.938 0h3.375v3.938h-3.375zm5.438 0q4.121-.186 3.188 3.938h-3.188zm-10.688 6h13.875v1.875H4.971z"/>`,
    [VehicleType.Funicular]: `<path d="M5.719 1.781q6.188-.047 12.375.094 1.179.624.938 1.969a13.6 13.6 0 0 1 2.25.094q.983.602.469 1.594-.312.432-.844.375.047 4.22-.094 8.438a1.8 1.8 0 0 1-.281.469q-1.309.141-2.625.094a2.46 2.46 0 0 0 .188 1.313 25 25 0 0 1 4.125-1.031q1.331.822.188 1.875A822 822 0 0 1 1.97 22.596q-1.708-.31-.75-1.781a43 43 0 0 1 4.688-1.219v-2.625a16 16 0 0 1-2.438-.094L3 16.406q-.141-5.249-.094-10.5-.956-.065-1.125-1.031.129-.674.75-.938a13.6 13.6 0 0 1 2.25-.094q-.204-1.372.938-2.063m-.75 4.125h5.813v6H4.969zm8.063 0h5.813v3.938h-5.813zm0 6h5.813v.938h-5.813zm-8.063 2.063h5.813v.938H4.969zm8.063.938h1.875q.083 1.107-.188 2.156l-5.625 1.594a4 4 0 0 1-.188-1.688q1.69.047 3.375-.094a1.8 1.8 0 0 0 .469-.281 4 4 0 0 0 .281-1.688"/>`,
    [VehicleType.Trolleybus]: `<path d="M6.613.388h10.725a45 45 0 0 1 .025 1.9q-1.738-.006-3.475.013a190 190 0 0 0-.975 2.25 25 25 0 0 1 3.15.3q1.052.172 2.025.6 1.703.804 1.888 2.688.025 5.175 0 10.35-.177 1.166-.975 2.025a60 60 0 0 1-.05 2.4q-.175.5-.688.638a10 10 0 0 1-1.375.025q-.628-.078-.863-.663a12 12 0 0 1-.038-1.325h-8a12 12 0 0 1-.038 1.325q-.234.584-.863.663a10 10 0 0 1-1.375-.025q-.513-.138-.688-.638a126 126 0 0 1-.063-2.4q-.783-.866-.963-2.025a564 564 0 0 1 .025-10.575q.324-1.591 1.763-2.337.967-.472 2.025-.675a23 23 0 0 1 2.725-.325l1.175-2.275q-2.538-.019-5.075-.013a43 43 0 0 1-.025-1.9m-.625 9.2h12v2.975h-12zm2.25 6q1.338-.08 1.713 1.2.151 1.147-.888 1.663-1.24.391-1.913-.713-.471-1.208.588-1.963.245-.121.5-.188m7 0q1.338-.08 1.713 1.2.151 1.147-.888 1.663-1.24.391-1.913-.713-.471-1.208.588-1.963.245-.121.5-.188" />`,
    [VehicleType.Monorail]: `<path d="M7.594 1.781q4.313-.047 8.625.094 2.891.453 3.656 3.281a163 163 0 0 1 0 11.063q-.707 2.488-3.281 2.719-2.846.758-3.094-2.156-1.594-1.5-3.188 0l-.563 1.688a1.3 1.3 0 0 1-.656.469q-2.682.46-4.594-1.406a6 6 0 0 1-.563-1.313 163 163 0 0 1 0-11.063q.815-2.832 3.656-3.375m9.75 2.813a79 79 0 0 1-10.875 0q.262-.229.563-.469a127 127 0 0 1 9.75 0q.301.24.563.469M5.905 7.033h12v2.813h-12zm0 4.875h12q.047 1.971-.094 3.938-.583 1.306-1.969.844-2.329-4.371-6.563-1.875a9.8 9.8 0 0 0-1.313 1.875q-1.386.462-1.969-.844-.141-1.966-.094-3.938"/><path d="M6.469 4.594a79 79 0 0 0 10.875 0q.153.017.188.188-5.625.375-11.25 0 .035-.171.188-.188m5.249 12.187q.893.096 1.219.938.14 1.027.094 2.063 2.274-.113 4.5.281.547.606.281 1.406-.329.392-.844.469-5.063.188-10.125 0-1.298-.303-.844-1.594l.281-.281a20 20 0 0 1 4.5-.281 11.4 11.4 0 0 1 .094-2.063q.288-.615.844-.938"/>`,
};

type Props =
    | {
          city?: string;
          agency?: undefined;
          type: VehicleType;
          color?: string;
          size?: number;
      }
    | {
          city: string;
          type: VehicleType;
          agency: string;
          color?: string;
          size?: number;
      };

export default ({ city, type, agency, color, size }: Props) => {
    const agencies = useAgencies();

    const agencyIcon = agency && agencies[`${city}_${agency}`]?.icon;

    return (
        <SvgXml
            xml={"<svg>" + (agencyIcon || typeIcons[type] || "") + "</svg>"}
            viewBox="0 0 24 24"
            width={size}
            height={size}
            fill={color}
            fillRule="evenodd"
        />
    );
};
