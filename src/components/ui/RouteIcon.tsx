import { useAgencies } from "~/hooks/useBackend";
import { VehicleType } from "~/tools/typings";
import { SvgXml } from "react-native-svg";

export const defaultColors: Record<number, string> = {
    [VehicleType.Tram]: "#be0d05",
    [VehicleType.Subway]: "#ba0059",
    [VehicleType.Train]: "#415f91",
    [VehicleType.Bus]: "#2b6c00",
    [VehicleType.Ferry]: "#0061a4",
    [VehicleType.Trolleybus]: "#006c46",
};

const typeIcons: Record<number, string> = {
    [VehicleType.Tram]: `<path d="M19 16.94V8.5c0-2.79-2.61-3.4-6.01-3.49l.76-1.51H17V2H7v1.5h4.75l-.76 1.52C7.86 5.11 5 5.73 5 8.5v8.44c0 1.45 1.19 2.66 2.59 2.97L6 21.5v.5h2.23l2-2H14l2 2h2v-.5L16.5 20h-.08c1.69 0 2.58-1.37 2.58-3.06zm-7 1.56c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm5-4.5H7V9h10v5z" />`,
    [VehicleType.Subway]: `<circle cx="15.5" cy="16" r="1" /><circle cx="8.5" cy="16" r="1" /><path d="M7.01 9h10v5h-10zM17.8 2.8C16 2.09 13.86 2 12 2c-1.86 0-4 .09-5.8.8C3.53 3.84 2 6.05 2 8.86V22h20V8.86c0-2.81-1.53-5.02-4.2-6.06zm.2 13.08c0 1.45-1.18 2.62-2.63 2.62l1.13 1.12V20H15l-1.5-1.5h-2.83L9.17 20H7.5v-.38l1.12-1.12C7.18 18.5 6 17.32 6 15.88V9c0-2.63 3-3 6-3 3.32 0 6 .38 6 3v6.88z" />`,
    [VehicleType.Train]: `<path d="M12 2c-4 0-8 .5-8 4v9.5C4 17.43 5.57 19 7.5 19L6 20.5v.5h2.23l2-2H14l2 2h2v-.5L16.5 19c1.93 0 3.5-1.57 3.5-3.5V6c0-3.5-3.58-4-8-4zM7.5 17c-.83 0-1.5-.67-1.5-1.5S6.67 14 7.5 14s1.5.67 1.5 1.5S8.33 17 7.5 17zm3.5-7H6V6h5v4zm2 0V6h5v4h-5zm3.5 7c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" />`,
    [VehicleType.Bus]: `<path d="M4 16c0 .88.39 1.67 1 2.22V20c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h8v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1.78c.61-.55 1-1.34 1-2.22V6c0-3.5-3.58-4-8-4s-8 .5-8 4v10zm3.5 1c-.83 0-1.5-.67-1.5-1.5S6.67 14 7.5 14s1.5.67 1.5 1.5S8.33 17 7.5 17zm9 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm1.5-6H6V6h12v5z" />`,
    [VehicleType.Ferry]: `<path d="M20 21c-1.39 0-2.78-.47-4-1.32-2.44 1.71-5.56 1.71-8 0C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 2.52 1.29 5.48 1.29 8 0 1.26.65 2.62.99 4 .99h2v-2h-2zM3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19zM6 6h12v3.97L12 8 6 9.97V6z" />`,
    [VehicleType.Trolleybus]: `<path d="M6.613.388h10.725a45 45 0 0 1 .025 1.9q-1.738-.006-3.475.013a190 190 0 0 0-.975 2.25 25 25 0 0 1 3.15.3q1.052.172 2.025.6 1.703.804 1.888 2.688.025 5.175 0 10.35-.177 1.166-.975 2.025a60 60 0 0 1-.05 2.4q-.175.5-.688.638a10 10 0 0 1-1.375.025q-.628-.078-.863-.663a12 12 0 0 1-.038-1.325h-8a12 12 0 0 1-.038 1.325q-.234.584-.863.663a10 10 0 0 1-1.375-.025q-.513-.138-.688-.638a126 126 0 0 1-.063-2.4q-.783-.866-.963-2.025a564 564 0 0 1 .025-10.575q.324-1.591 1.763-2.337.967-.472 2.025-.675a23 23 0 0 1 2.725-.325l1.175-2.275q-2.538-.019-5.075-.013a43 43 0 0 1-.025-1.9m-.625 9.2h12v2.975h-12zm2.25 6q1.338-.08 1.713 1.2.151 1.147-.888 1.663-1.24.391-1.913-.713-.471-1.208.588-1.963.245-.121.5-.188m7 0q1.338-.08 1.713 1.2.151 1.147-.888 1.663-1.24.391-1.913-.713-.471-1.208.588-1.963.245-.121.5-.188" />`,
};

type Props = {
    type: VehicleType;
    agency?: string;
    color?: string;
    size?: number;
};

export default ({ type, agency, color, size }: Props) => {
    const agencies = useAgencies(); // fix: only shows agencies from selected city

    return (
        <SvgXml
            xml={"<svg>" + (agencies[agency!]?.icon || typeIcons[type]) + "</svg>"}
            viewBox="0 0 24 24"
            width={size}
            height={size}
            fill={color}
            fillRule="evenodd"
        />
    );
};
